<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
#state, #national{background-color:#E0E0E0; font-weight:bold}
#table1,#table1 td, #table1 tr,#table1 th  {
 border:1px solid black;
border-collapse:collapse;
}
.table2{
border-style: hidden;
border-collapse:collapse;

}
.table2 td, .table2 tr, .table2 th{
border: 1px solid black;
}
.table2 td, .table2 th{width:50px}

</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>


<script>
function stateInfo(state){
 var year = $("#yearSelector").val();
// console.log(year);
year = year.join("x");
	//console.log(year);
 //var year = document.forms[0].elements[0].value;
 if (state==""  ) {
    $("#agency").html("");
    return;
  } 
  if(document.getElementById("table")){
   $("#table").html("");
  }

  
  $.get("housing2.php?s="+state+"&y="+year,function(responseData) {
      $("#agency").html(responseData);
  });
  
  
  
  
  /*if (window.XMLHttpRequest) {
    // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
  } else { // code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
      document.getElementById("agency").innerHTML=xmlhttp.responseText;
    }
  }
  xmlhttp.open("GET","housing2.php?s="+state+"&y="+year,true);
  xmlhttp.send();*/
}





function agencyInfo(ag){

//var year = document.forms[0].elements[0];
var year = $("#yearSelector").val();
	//console.log(year);
	year = year.join("x");
	//console.log(year);

var agency = $("#agencySelector").val();
	//console.log(agency);
	agency = agency.join("-");
	//console.log(agency);

if (state=="" || year=="" || agency=="" ) {
    $("#agency").html("");
	 $("#table").html("");
    return;
  } 
//var ag = $("#agencySelector").val()[0];
	


//var state = document.forms[0].elements[1].value;
var state = $("#stateSelector").val();

 $.get("housing2.php?s="+state+"&y="+year+"&a="+agency,function(responseData) {
      $("#table").html(responseData);
  });
  
 /*var yearArray = new Array();
 var i;
 var count = 0;
 for (i=0; i<year.options.length; i++) {
    if (year.options[i].selected) {
     yearArray[count] = year.options[i].value;
      count++;
    }
  }*/


  /*if (a=="") {
    document.getElementById("table").innerHTML="";
    return;
  } 
 // $.get("housing2.php?s="+state+"&y="+year+"&a="+ag
 if (window.XMLHttpRequest) {
    // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
  } else { // code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
      document.getElementById("table").innerHTML=xmlhttp.responseText;
    }
  }
   var ag=encodeURIComponent(a);
  xmlhttp.open("GET","housing2.php?s="+state+"&y="+year+"&a="+ag,true);
  xmlhttp.send();
  */
   
   
  

}




</script>








</head>

<body>


Year: <select id="yearSelector" name="year[]" size="1" multiple="multiple" onchange="agencyInfo(this.value)"  >
<option value="">SELECT A YEAR</option>
<option value="04">2004</option>
<option value="05" >2005</option>
<option value="06" >2006</option>
<option value="07">2007</option>
<option value="08">2008</option>
<option value="09">2009</option>
<option value="10">2010</option>
<option value="11">2011</option>
<option value="12">2012</option>
<option value="13">2013</option>
</select>

State: <select id="stateSelector" name="state" size="1"  onclick="stateInfo(this.value)"  >
<option value="">SELECT A STATE</option>
 <option value="AK">Alaska</option>
  <option value="AL">Alabama</option>
  <option value="AZ">Arizona</option>
  <option value="AR">Arkansas</option>
  <option value="CA">California</option>
  <option value="CO">Colorado</option>
  <option value="CT">Connecticut</option>
  <option value="DE">Delaware</option>
  <option value="DC">Dist of Columbia</option>
  <option value="FL">Florida</option>
  <option value="GA">Georgia</option>
    <option value="GU">Guam</option>
  <option value="HI">Hawaii</option>
  <option value="ID">Idaho</option>
  <option value="IL">Illinois</option>
  <option value="IN">Indiana</option>
  <option value="IA">Iowa</option>
  <option value="KS">Kansas</option>
  <option value="KY">Kentucky</option>
  <option value="LA">Louisiana</option>
  <option value="ME">Maine</option>
    <option value="TQ">Mariana Islands</option>
  <option value="MD">Maryland</option>
  <option value="MA">Massachusetts</option>
  <option value="MI">Michigan</option>
  <option value="MN">Minnesota</option>
  <option value="MS">Mississippi</option>
  <option value="MO">Missouri</option>
  <option value="MT">Montana</option>
  <option value="NE">Nebraska</option>
  <option value="NV">Nevada</option>
  <option value="NH">New Hampshire</option>
  <option value="NJ">New Jersey</option>
  <option value="NM">New Mexico</option>
  <option value="NY">New York</option>
  <option value="NC">North Carolina</option>
  <option value="ND">North Dakota</option>
  <option value="OH">Ohio</option>
  <option value="OK">Oklahoma</option>
  <option value="OR">Oregon</option>
  <option value="PA">Pennsylvania</option>
   <option value="PQ">Puerto Rico</option>
  <option value="RI">Rhode Island</option>
     <option value="SC">South Carolina</option>
  <option value="SD">South Dakota</option>
  <option value="TN">Tennessee</option>
  <option value="TX">Texas</option>
  <option value="UT">Utah</option>
  <option value="VT">Vermont</option>
  <option value="VA">Virginia</option>
    <option value="VQ">Virgin Islands</option>
  <option value="WA">Washington</option>
  <option value="WV">West Virginia</option>
  <option value="WI">Wisconsin</option>
  <option value="WY">Wyoming</option>
  
</select>

<span id="agency"></span>


<br /><br /><br />
<div id="table"></div>

</body>
</html>